<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ¦¾ ë„ì „ ì¼ìƒ íŠ¹ì „ëŒ€ ì¼ì¼ë³´ê³  ê³„ì‚°ê¸°</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 20px;
      background: #f7f7f7;
    }
    textarea {
      width: 100%;
      height: 260px;
      font-size: 14px;
      padding: 10px;
      box-sizing: border-box;
    }
    button {
      margin-top: 10px;
      padding: 10px 18px;
      font-size: 16px;
      cursor: pointer;
    }
    pre, .box {
      background: #fff;
      padding: 12px;
      margin-top: 15px;
      border: 1px solid #ddd;
      white-space: pre-wrap;
    }
    .group-buttons button.active {
      background: #333;
      color: #fff;
    }
  </style>
</head>
<body>

<h2>ğŸ¦¾ ë„ì „ ì¼ìƒ íŠ¹ì „ëŒ€! ì¼ì¼ë³´ê³  ìë™ ê³„ì‚°ê¸°</h2>

<div class="group-buttons">
  <strong>ì¡° ì„ íƒ:</strong>
  <button class="active" onclick="selectGroup(1, this)">1ì¡°</button>
  <button onclick="selectGroup(2, this)">2ì¡°</button>
  <button onclick="selectGroup(3, this)">3ì¡°</button>
  <button onclick="selectGroup(4, this)">4ì¡°</button>
  <button onclick="selectGroup(5, this)">5ì¡°</button>
</div>

<br>

<textarea id="input" placeholder="ì›ë¬¸ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ê¸°"></textarea>
<br>
<button onclick="processText()">ê²°ê³¼ ë³´ê¸°</button>
<button onclick="copyResult()">ë³µì‚¬í•˜ê¸°</button>

<h3>ğŸ“‹ ë³µì‚¬í•´ì„œ ì œì¶œí•  ê²°ê³¼</h3>
<pre id="output"></pre>

<h3>âœ… í™•ì¸ìš© ìš”ì•½</h3>
<div class="box" id="summary"></div>

<script>
let selectedGroup = "1ì¡°";

function selectGroup(n, btn) {
  selectedGroup = n + "ì¡°";
  document
    .querySelectorAll(".group-buttons button")
    .forEach(b => b.classList.remove("active"));
  btn.classList.add("active");
}

function processText() {
  const lines = document.getElementById("input").value.split("\n");

  let result = [];
  let sum = { f:0, i:0, m:0, t:0, s:0, score:0 };
  let names = 0;

  for (let line of lines) {
    const t = line.trim();

    // âœ… ì œê±° ëŒ€ìƒ
    if (
      t === "ì´ë¦„/0/0/0/0/0/0" ||
      t.startsWith("ex)") ||
      !t.includes("/")
    ) continue;

    if (t.endsWith("ì¡°")) {
      result.push(selectedGroup);
      continue;
    }

    if (t.startsWith("=> ì¡°ì´ì ìˆ˜")) {
      continue;
    }

    const parts = t.split("/");
    if (parts.length === 7 && parts[0] !== "ì´ë¦„") {
      const [n,f,i,m,t2,s2,_] = parts;
      const ff=+f, ii=+i, mm=+m, tt=+t2, ss=+s2;
      const score = ff + ii*2 + mm*3 + tt*4 + ss*5;

      sum.f+=ff; sum.i+=ii; sum.m+=mm;
      sum.t+=tt; sum.s+=ss; sum.score+=score;
      names++;

      result.push(`${n}/${ff}/${ii}/${mm}/${tt}/${ss}/${score}`);
    } else {
      result.push(line);
    }
  }

  // âœ… ì¡°ì´ì ìˆ˜ ì¤„ ë‹¤ì‹œ ì‚½ì…
  const targetIndex = result.findIndex(l => l.includes("ğŸ¦¾"));
  result.splice(
    targetIndex + 3,
    0,
    "",
    `=> ì¡°ì´ì ìˆ˜ : ${sum.score}ì `,
    ""
  );

  document.getElementById("output").textContent = result.join("\n");

  const goal = names * 7;
  const status = sum.score >= goal ? "âœ… ë‹¬ì„±" : "âš ï¸ ë¯¸ë‹¬";

  document.getElementById("summary").textContent =
`í•©ê³„/${sum.f}/${sum.i}/${sum.m}/${sum.t}/${sum.s}/${sum.score}
ëª©í‘œ: ${goal}ì  / í˜„ì¬: ${sum.score}ì  ${status}`;
}

function copyResult() {
  navigator.clipboard.writeText(
    document.getElementById("output").textContent
  ).then(() => alert("ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤ âœ…"));
}
</script>

</body>
</html>
